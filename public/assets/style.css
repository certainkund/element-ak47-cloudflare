:root{
  --bg:#0b0b11; --bg-card:rgba(16,16,28,.72);
  --glass:rgba(28,28,48,.42); --glass-bd:rgba(196,181,253,.25);
  --text:#e7e6ff; --muted:#a09ac2; --accent:#c4b5fd; --accent-2:#ef4444;
  --halo:rgba(196,181,253,.28);
  --shadow:0 10px 40px rgba(0,0,0,.45), inset 0 0 40px rgba(196,181,253,.08);
}
@media (prefers-color-scheme: light){
  :root{ --bg:#f6f6fb; --bg-card:rgba(255,255,255,.85); --text:#1a1533; --muted:#4b4663; --glass:rgba(255,255,255,.62); --glass-bd:rgba(67,56,202,.25); }
}
html,body{background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial}
.font-cinzel{font-family:"Cinzel",serif}

.banner{
  position:sticky;top:0;z-index:50;
  background:linear-gradient(90deg, rgba(99,102,241,.18), rgba(236,72,153,.18));
  border-bottom:1px solid var(--glass-bd);
  backdrop-filter:blur(8px);
  color:var(--muted);
  padding:.45rem .85rem; text-align:center; font-size:.82rem;
}
.status-dot{
  display:inline-block;width:.6rem;height:.6rem;margin-left:.45rem;
  border-radius:999px;background:#22c55e;box-shadow:0 0 18px rgba(34,197,94,.55);
}

.glass-pane{
  background:var(--glass); backdrop-filter:blur(10px);
  border:1px solid var(--glass-bd); box-shadow:var(--shadow);
}

.nav-link{
  color:var(--muted); font-weight:600; letter-spacing:.02em;
  padding:.4rem .6rem; border-radius:.6rem; transition:all .2s ease;
}
.nav-link:hover{ color:var(--text); background:rgba(196,181,253,.12); }

.blood-moon-card{
  background:radial-gradient(120% 120% at 20% 0%, rgba(244,63,94,.18), transparent 55%), var(--bg-card);
  border:1px solid rgba(244,63,94,.28); border-radius:1rem;
  box-shadow:0 0 48px rgba(244,63,94,.12), var(--shadow); color:var(--text);
}

.output-card{
  background:var(--bg-card); border:1px solid var(--glass-bd);
  box-shadow:var(--shadow); border-radius:.8rem;
}

.btn{
  display:inline-flex;align-items:center;justify-content:center;gap:.5rem;
  padding:.6rem 1rem; border-radius:999px; font-weight:700;
  border:1px solid var(--glass-bd);
  background:linear-gradient(135deg, rgba(196,181,253,.18), rgba(99,102,241,.22));
  color:var(--text); text-shadow:0 0 6px rgba(196,181,253,.25);
  transition:transform .06s ease, box-shadow .2s ease, background .2s ease;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 6px 28px var(--halo); }

.timeline{ position:relative; padding-left:1.2rem; }
.timeline:before{ content:""; position:absolute; left:.35rem; top:.25rem; bottom:.25rem; width:2px; background:rgba(196,181,253,.22); }
.timeline-item{
  position:relative; padding:.65rem .8rem .65rem 1rem; border:1px solid var(--glass-bd);
  border-radius:.75rem; background:var(--bg-card);
}
.timeline-item:before{
  content:""; position:absolute; left:-.62rem; top:.9rem; width:.55rem; height:.55rem; background:var(--accent);
  border-radius:999px; box-shadow:0 0 16px var(--halo);
}

body.classroom{ --bg:#f9fafb; --bg-card:#ffffff; --text:#0a0a0a; --muted:#4b5563; }
body.classroom .blood-moon-card{ background:var(--bg-card); border-color:rgba(244,63,94,.35); }
#rate-limit-msg{ font-size:.9rem }
/* === Infernal Blade Background (original, non-infringing) === */
.daemon-bk{
  position: fixed; inset: -10vmax; z-index: -1; pointer-events: none;
}
.daemon-bk::before{
  content:""; position:absolute; inset:0;
  background:
    radial-gradient(60vmax 60vmax at 70% 10%, rgba(239,68,68,.18), transparent 55%),
    radial-gradient(50vmax 50vmax at 20% 80%, rgba(190,24,93,.16), transparent 55%),
    conic-gradient(from 0deg at 50% 50%, rgba(239,68,68,.10), rgba(190,24,93,.12), rgba(239,68,68,.10));
  filter: blur(60px) saturate(120%); mix-blend-mode: screen;
  animation: ibk-spin 40s linear infinite; opacity:.6;
}
.daemon-bk::after{
  content:""; position:absolute; inset:-20%;
  background:
    repeating-linear-gradient(115deg, rgba(255,255,255,.08) 0 2px, transparent 2px 18px),
    repeating-linear-gradient(245deg, rgba(255,255,255,.05) 0 1px, transparent 1px 14px);
  mix-blend-mode: overlay; animation: ibk-slash 8s linear infinite; opacity:.35;
}
@keyframes ibk-spin { to { transform: rotate(360deg); } }
@keyframes ibk-slash { to { transform: translate3d(-12%, -6%, 0); } }

/* Embers canvas */
#embers-canvas{
  position: fixed; inset:0; z-index:0; pointer-events:none;
  mix-blend-mode: screen; opacity:.45; filter: blur(.2px);
}

/* Hide effect in classroom/light mode */
body.classroom .daemon-bk, body.classroom #embers-canvas { display:none; }
